<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>09｜全面调教：让GPT理解“否定” | geekbang</title><meta name="author" content="码农张三"><meta name="copyright" content="码农张三"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="09｜全面调教：让GPT理解“否定”你好，我是键盘，我们继续驯服 GPT。 这节课我们来直面“人智协作”中绕不开的底层诉求——精准控制。什么意思呢？它可以拆解成两个子课题。   要： 清晰、明确地表达你的需求。 不要： 引导AI规避你不想生成的内容。  大多数人都盯着“要什么”，却忽略了“精准地不要什么”的重要性，结果就是因为这20%的细节，让80%的结果可用性大幅下降。这就是课程标题中“让GPT">
<meta property="og:type" content="article">
<meta property="og:title" content="09｜全面调教：让GPT理解“否定”">
<meta property="og:url" content="https://zhuansun.github.io/geekbang/posts/774097647.html">
<meta property="og:site_name" content="geekbang">
<meta property="og:description" content="09｜全面调教：让GPT理解“否定”你好，我是键盘，我们继续驯服 GPT。 这节课我们来直面“人智协作”中绕不开的底层诉求——精准控制。什么意思呢？它可以拆解成两个子课题。   要： 清晰、明确地表达你的需求。 不要： 引导AI规避你不想生成的内容。  大多数人都盯着“要什么”，却忽略了“精准地不要什么”的重要性，结果就是因为这20%的细节，让80%的结果可用性大幅下降。这就是课程标题中“让GPT">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg">
<meta property="article:published_time" content="2023-10-20T09:48:40.000Z">
<meta property="article:modified_time" content="2023-12-15T09:26:32.671Z">
<meta property="article:author" content="码农张三">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zhuansun.github.io/geekbang/posts/774097647"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '09｜全面调教：让GPT理解“否定”',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-15 09:26:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="geekbang" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/653470a0c458853aef5813f1.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">870</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">geekbang</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">09｜全面调教：让GPT理解“否定”</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-10-20T09:48:40.000Z" title="发表于 2023-10-20 09:48:40">2023-10-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9B%B6%E5%9F%BA%E7%A1%80GPT%E5%BA%94%E7%94%A8%E5%85%A5%E9%97%A8%E8%AF%BE/">零基础GPT应用入门课</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="09｜全面调教：让GPT理解“否定”"><a href="#09｜全面调教：让GPT理解“否定”" class="headerlink" title="09｜全面调教：让GPT理解“否定”"></a>09｜全面调教：让GPT理解“否定”</h1><p>你好，我是键盘，我们继续驯服 GPT。</p>
<p>这节课我们来直面“人智协作”中绕不开的底层诉求——精准控制。什么意思呢？它可以拆解成两个子课题。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/88807cff656284544433f2ca9d569170.png" alt="图片"></p>
<ol>
<li><strong>要：</strong> 清晰、明确地表达你的需求。</li>
<li><strong>不要：</strong> 引导AI规避你不想生成的内容。</li>
</ol>
<p>大多数人都盯着“要什么”，却忽略了“精准地不要什么”的重要性，结果就是因为这20%的细节，让80%的结果可用性大幅下降。这就是课程标题中“让GPT理解否定”的含义了。</p>
<p>其实在GPT这类语言模型中遇到的“控制”难题到了非文本生成模型中也无法回避。比如Midjourney，它的出图质量那么高，为什么大家花了钱还在愁落地应用呢？Stable Diffusion + ControlNet会告诉你，是控制。ControlNet插件就是直接指挥SD应该用什么表情、什么角度、什么姿势等等细节来绘图的。控制效果不好，消耗更多的成本，也足够让你质疑AI、怀疑人生。</p>
<p>这节课我会带你设计一个脚本人设来实现长图的自动切割，通过案例讲明白如何让 GPT 理解“否定”。这个脚本在商品详情页的裁剪、图片邮件切割等等这类图片切割的场景里都非常实用。</p>
<p>我们需要用到Mac自带的AppleScript，Windows用户使用Python也可以替代实现。如果你会使用Figma，也可以让ChatGPT帮助开发一个插件来实现。</p>
<p>以上方案都不需要开发基础，我会把它们作为分支功能合入prompt，和你一起通通实现。</p>
<h2 id="GPT无法有效理解“否定”的根源是什么？"><a href="#GPT无法有效理解“否定”的根源是什么？" class="headerlink" title="GPT无法有效理解“否定”的根源是什么？"></a><strong>GPT无法有效理解“否定”的根源是什么？</strong></h2><p>GPT模型是基于概率和模式来识别prompt的，而不是通过真正的阅读来理解文本。所以TA可能无法准确地理解和处理否定概念。但它的性能和准确度会随着模型的更新和优化而提高。另一方面，GPT会通过提取重点关键字来进一步理解prompt。</p>
<p>这里面，具体的关键词权重最高，连接词和“不要”这样的表达可能会被忽略。</p>
<p>在咱们课程的留言区中，叶筱结合自己的理解，给出了生动的比喻。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/7fec802e20d08ebb2495e96a9f69e024.jpg" alt="图片"></p>
<p>再比如我们讲过的“双语混打”中 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/663631">爬取Twitter数据</a> 的案例，GPT会更倾向于使用相关的API来实现，偏偏我还在prompt中提到了API，那TA就会盯着API关键词，忽略“不要使用”四个大字。</p>
<p>💬 案例prompt</p>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">写一个python脚本，将Twitter的&lt;post>抓取后保存为pdf，不要使用Twitter API。
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>也就是说，在这种模式下，GPT更大概率会使用API来实现，而不是你说什么就是什么。使用“不要”换成“Do not”这种 <a target="_blank" rel="noopener" href="http://time.geekbang.org/column/article/663631">双语混打</a> 策略都不能彻底解决“有效否定”的原因也在这里。</p>
<p>下面是 <a target="_blank" rel="noopener" href="https://help.openai.com/en/articles/6654000-best-practices-for-prompt-engineering-with-openai-api">官方实践</a> 给出的佐证和指导，可以参考。</p>
<blockquote>
<p>Instead of just saying what not to do, say what to do instead。（用肯定来取代否定）</p>
<p>❌ Less effective（效果不佳）</p>
</blockquote>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">The following is a conversation between an Agent and a Customer. DO NOT ASK USERNAME OR PASSWORD. DO NOT REPEAT.

Customer: I can’t log in to my account.
Agent:
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>✅ Better（效果更好）</p>
</blockquote>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">The following is a conversation between an Agent and a Customer. The agent will attempt to diagnose the problem and suggest a solution, whilst refraining from asking any questions related to PII. Instead of asking for PII, such as username or password, refer the user to the help article www.samplewebsite.com/help/faq

Customer: I can’t log in to my account.
Agent:
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="在案例中学习：全面调教，设计一个长图裁剪脚本"><a href="#在案例中学习：全面调教，设计一个长图裁剪脚本" class="headerlink" title="在案例中学习：全面调教，设计一个长图裁剪脚本"></a>在案例中学习：全面调教，设计一个长图裁剪脚本</h2><p>上面的官方指导我在第二节课的“ <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/663631">有效否定三策略</a>”中也有讲过，再复习一下。</p>
<ol>
<li>否定转肯定。</li>
<li>侧重肯定，再附上对应的否定。</li>
<li>加入示例调教。</li>
</ol>
<p>现在你可以 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/666642">借助综合人设模版</a>，直接通过展开 <code>/功能：要做什么</code> 来盘点需求，同步设计prompt，看看怎么 <strong>针对综合人设的5个重点定义，把“有效否定3策略”融合进去</strong>。</p>
<p>为了方便理解，你可以先把“肯定&#x2F;否定”这一组概念，扩展为要&#x2F;不要、偏好&#x2F;默认、是&#x2F;不是、应该&#x2F;避免……因为它们和“肯定&#x2F;否定”一样，都隐藏了一个判断的逻辑。</p>
<ul>
<li><strong>功能：要做什么</strong> <strong>，</strong> <strong>不要什么。</strong></li>
</ul>
<p>开局先用一句话定义核心功能，围绕核心来有序展开细节，你的设计就不会乱。</p>
<p>💬 prompt设计：核心功能</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">功能：针对指定路径的长图，按一个指定高度切割为多个切片，宽度不变，新建桌面文件夹Slices保存
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>这里我还命名了一个综合人设“Script Master”，可以容纳不同平台和编程语言的解决方案。另外，“任务完成”这种关键的反馈也设置一下，让GPT设计好UI，而且可以精准控制差异化，比如Mac上用弹窗、Python的是文字反馈、Figma则是完整GUI（图形用户界面）。除了这些实际功能，还有洗脑用的“初始化”，让GPT先和用户打招呼，递出菜单沟通需求。</p>
<p>💬 prompt设计：子功能</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">/mac：用AppleScript编写一个脚本来实现，<span class="token code-snippet code keyword">`格式选择`</span>需要UI
/win：编写一个python脚本来实现
/figma：开发一个Figma插件来实现，需要UI
/help：列出<span class="token code-snippet code keyword">`偏好`</span>菜单，提供指引
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>💬 prompt设计：初始化</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">初始化：&#123;<span class="token code-snippet code keyword">`回复`</span>+<span class="token code-snippet code keyword">`配图`</span>+<span class="token code-snippet code keyword">`偏好`</span>列表+<span class="token code-snippet code keyword">`指令`</span>表格……&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><strong>偏好：偏好什么，否则默认什么。</strong></li>
</ul>
<p>GPT理解偏好的语境还是很容易的，侧重肯定你的偏好即可。没有想法就默认使用一套设计好的高容错默认值。</p>
<p>比如你日常用的是Windows，初始prompt里的平台默认值就改成Windows。这些偏好会决定GPT用什么设置来接收什么任务，用什么样的方式去执行。注意，偏好不是焊死的，随时可以用&#x2F;help指令来调整。</p>
<p>💬 可复用的prompt写法</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">🎛️ 基础：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>用户基础</span><span class="token punctuation">></span></span> 默认：小白
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><strong>判断：满足条件做什么，否则做什么。</strong></li>
</ul>
<p>这是让GPT一步一步思考的关键。</p>
<p>先说 <strong>情况判断</strong>。与其一条路走到黑，让GPT不停地执行所有事情，不如设计多个分支，某个节点满足条件再自动推理下一个分支，会更加精准、高效。“一条道走到黑”是没有判断的，即使出错也可能最后再给你反馈。就像地上一个井盖丢了，就应该先树立一个警示牌，而不是等人掉进去了再说“哦欧……”。</p>
<p>举个例子，如果想达到的效果是：假如用户定位是“小白”，则提供必要的安装指引再开始设计；如果用户有一定基础，则直接给出代码，不要给多余的指引。那应该怎么写呢？</p>
<p>💬 可复用的prompt判断示例</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">如果用户是“小白”，请直接提供方案。否则：
<span class="token list punctuation">-</span> 选择/win的情况，你应该先引导用户安装python、安装依赖包。
<span class="token list punctuation">-</span> 选择/figma插件的情况，你应该提供详尽的指导。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>还有一种判断是 <strong>确认类判断</strong>，“是”就继续，“不是”就修改。我倾向于用“#注释”的方式来调教GPT。比如“不要使用代码块回复”即遇到Markdown就正确地渲染出来。</p>
<p>另外，假如用户已经修改了某个参数，确认过了，那么根据“偏好只确认一次”，就不要再麻烦用户继续确认其他的设置，直接进入主题就好。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span>不要使用代码块回复，偏好只确认一次</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>如果前面已经提供了“偏好”，那就按需修改，不然就扣1默认，进入主题。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">请确认你的偏好，回“1”保持默认。
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><strong>模版：什么输出格式？拒绝单调。</strong></li>
</ul>
<p>模版就是所谓的示例调教，让GPT抄作业。通过这种方式，直截了当地说清楚GPT应该做什么。注意不要使用干巴巴的纯文字段落，要用咱们说过的结构化表达。</p>
<p>💬 可复用的prompt写法</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">表格输出<span class="token code-snippet code keyword">`偏好`</span>，模版：
<span class="token title important"><span class="token punctuation">##</span> ✦偏好✦</span>
表格 #不要使用序号

用列表列出<span class="token code-snippet code keyword">`指令`</span>菜单，模版：
<span class="token title important"><span class="token punctuation">##</span> ✦指令✦</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>不同的分支，可以有不同的模版，比如设置项适合用带图标的表格，指令菜单适合用列表，表格序号是冗余可以去掉。这些差异性和颗粒度都能通过自然语言精准控制。</p>
<ul>
<li><strong>要求：应该怎样，避免怎样。</strong></li>
</ul>
<p>因为要求是影响全局的，所以描述就要更加缜密，重点应用“先肯定，再附上对应的否定”，把“要”和“不要”都带上。在这个案例里，最重要的事情是强调“把用户提供的信息自动填入设计的代码中”，不要让人来操心。剩下的做到高效、简洁易懂和少冗余，把必要的要求用“肯定”的语气表达出来就足够了。</p>
<p>💬 可复用的prompt写法</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">-</span> 把用户提供的路径填入脚本，而不是人力整合。
<span class="token list punctuation">-</span> 使用高效的算法，避免复杂的运算和步骤。
<span class="token list punctuation">-</span> 尽量少地调用依赖库存，使用简洁易懂的注释，而不是包含大量术语的方式。
<span class="token list punctuation">-</span> 正确渲染markdown。
<span class="token list punctuation">-</span> 请一步一步思考，输出完整的代码。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>最后，在综合人设prompt（模板在 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/666081">这里</a>）的设计中梳理需求，全盘控制。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/87b3e4c1207f9c3eec64293aa26c0af8.png" alt="图片"></p>
<p>可以看到，在“有效否定3策略”的基础上，这里使用了更全面的控制，其中有2点最重要。</p>
<ol>
<li><strong>加入判断，应对复杂。</strong> 通过设计多个任务节点的方式，有效释放GPT思维链（CoT）的能力，一步一步推理，而且是有针对性地选择某个任务节点来继续。</li>
<li><strong>增加上下文联系，让描述模式更好理解。</strong> 比如“使用高效的方式”和“避免额外的引用库”这样的上下文组合。比在某些位置单纯提到“不要什么”更精准，不需要处处添加示例。</li>
</ol>
<h3 id="自检，排除自相矛盾"><a href="#自检，排除自相矛盾" class="headerlink" title="自检，排除自相矛盾"></a>自检，排除自相矛盾</h3><p>跑机之前，先过一遍整体的描述有没有自相矛盾的地方。因为多综合人设容易突破500字，前后不一致的概率就更大。比如前文要求“不要使用序号”，后面又来一句“序号列居中对齐”。如果出现这种低级错误，一定要修正初始prompt后再继续。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/060a345795eddd1949a36db1efc146a2.png" alt="图片"></p>
<p>一切就绪，我们放飞ChatGPT对话框的小飞机。</p>
<h3 id="一步一步实现"><a href="#一步一步实现" class="headerlink" title="一步一步实现"></a>一步一步实现</h3><p>首先和GPT沟通偏好。通过emoji加表格菜单的方式就能打造友好的UI交互。这里的图片裁切任务，宽度不变，单独要求高度使用1456px。根据“只确认一次”的要求，我们就可以直接选择不同场景的指令开始派活。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/9427c97c1194defcedc5815b3f24dfb0.png" alt="图片"></p>
<p><strong>第一种场景</strong>，选择 <code>/mac</code> ，用AppleScript来实现。这里发现需要额外的ImageMagick支持，粘贴代码运行就好。接着拿到AppleScript代码，依旧是复制粘贴，想不想夸GPT就随你了。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/cc5fd454d2273b2c38d52d07648daa98.png" alt="图片"></p>
<p>一稿过，既高效又有效。路径和参数都自动合入到了代码里，也按要求给出了提醒UI，完全不需要我们懂编码，也不需要操作图像处理工具。可以看到，这里如无意外，最重要的反而是“完成的反馈”，我在 <code>🔔 提醒</code> 中给出了偏好设置。</p>
<p>那有意外怎么办呢？老办法，用prompt模版 <code>报错：你复制的报错信息</code> 。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/ccd939bdc4888d9f5d5a4f75ab8f6434.png" alt="图片"></p>
<p><strong>第二种场景</strong>，切到 <code>/win</code> ，验收Windows用户使用Python来实现的情况，也一稿通过了（设计师泪流满面)。依赖库只使用了图形处理所需的PIL和访问系统的os，没有多余。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/72e13d9df519956cb09e6ac5199e8648.png" alt="图片"></p>
<p>这里的命名不是严格遵循“偏好”的，其实对于复杂的任务，局部不稳定输出还是比较常见的。只要不影响核心的功能，通过上一节课的 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/667209">迭代方法</a> 持续沟通修正就好，这里就只要指正一次。</p>
<p>成果顺利验收。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/5887839c16ce97c0c3edbf0cf1df84f9.png" alt="图片"></p>
<p>到这里已经跑了2个方案，输出有点长了，很多小伙伴输出一长就会迷路。没关系，一句 <code>/help</code> 就能解决。除了切换需求，你也可以随时修改偏好。除此之外的其他疑问，GPT都会为你排忧解难。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/76358a36ee15fef99daf14f8e1a1eaf7.png" alt="图片"></p>
<p><strong>第三个场景</strong>，切到 <code>/figma</code> ，用（指挥GPT）开发一个插件的方式来实现。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/7090502ce791454bb6668b4445309bdf.png" alt="图片"></p>
<p>Figma插件这个方式主打GUI可视化交互，需要比较长的迭代沟通，这里我用设计师小伙伴 <a target="_blank" rel="noopener" href="https://dribbble.com/kakit">Kakitchen</a> 实现的成品给你感受一下。现在在GPT的协助下，一位设计师就可以秒变全栈工程师。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/9a8fd99789f8f7eyyef633b42252e37d.png" alt="图片"></p>
<h3 id="彩蛋：图片嵌入和流程图"><a href="#彩蛋：图片嵌入和流程图" class="headerlink" title="彩蛋：图片嵌入和流程图"></a>彩蛋：图片嵌入和流程图</h3><p>案例到这里就结束了，不过除了迭代答案，我们当然也迭代知识，在这次实验里我有2个关于定义专业输出的新发现，和你分享一下，分别是精准控制图片嵌入和流程图生成（控制逻辑）。</p>
<h4 id="图片嵌入：“要你好看”"><a href="#图片嵌入：“要你好看”" class="headerlink" title="图片嵌入：“要你好看”"></a>图片嵌入：“要你好看”</h4><p>偏好设置中的配图来自可商用的高质量图库Unsplash。在GPT中使用图片，除了必要的数据可视化和图形辅助学习，装饰类的都不适合占太大篇幅，尤其是高度。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/f06a5a51297acf7eec9a13637f820f53.png" alt="图片"></p>
<p>根据原图URL中的参数 <code>&amp;fit=crop&amp;w=1974</code> ，可以看出自适应方式是裁剪，宽度是1974px。如果你已经有一个选好的 <a target="_blank" rel="noopener" href="https://unsplash.com/">unsplash</a> 图片的链接，那就用这行Markdown模版嵌入图片。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url"><span class="token operator">!</span>[<span class="token content">接口配图</span>](<span class="token url">images/667888/?&lt;关键词></span>)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>不想动手找图片，那就用之前分享过的翻盲盒接口，这种方式不能控制目标图片，它会随着浏览器的刷新，根据关键词来变换输出。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url"><span class="token operator">!</span>[<span class="token content">接口配图</span>](<span class="token url">images/667888/?&lt;关键词></span>)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="流程图：先胜后战，全局在握"><a href="#流程图：先胜后战，全局在握" class="headerlink" title="流程图：先胜后战，全局在握"></a>流程图：先胜后战，全局在握</h4><p>假如你还想用可视化的方式清晰地还原设计逻辑，通过这种方式来自检或者细化设计，怎么办？</p>
<p>💬 prompt</p>
<pre class="line-numbers language-none"><code class="language-none">将xx流程输出为mermaid代码
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>用上面的prompt，再找一个支持Mermaid的编辑器，把GPT生成的代码贴进去，节点中的emoji和符号（比如“?” ）会造成报错，去掉即可。这里我用了Notion笔记，看右图成果，哪里需要自己动手画？</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/fe6d14db6d70220425daac314cb1051b.png"></p>
<h2 id="小黑板"><a href="#小黑板" class="headerlink" title="小黑板"></a>小黑板</h2><p>这节课，我从“人智协作”中绕不开的底层诉求出发，将精准控制拆解成了“要”和“不要”两个子课题，“要”的问题前面的课程已经解决了，所以我们集火解决掌控“不要”的问题。</p>
<p>GPT无法有效理解“否定”，主要源于TA是根据概率和模式来识别，而不是通过真正的阅读来理解文本的基础逻辑。另一方面，GPT通过提取重点关键字来实现进一步操作，“不要”这样的动作可能会被忽略。所以，我们可以通过融合“有效否定3策略”“加入判断”和“增加上下文联系”等多种策略来保证GPT能够真正“阅读理解”。</p>
<p>比如我们这节课设计的Script Master，在“&#x2F;功能”中明确要做什么、不要什么，而不是只说要什么；在“偏好”中侧重肯定个人偏好，否则就用默认值容错，无需示例；再加入“判断”，满足条件做什么，否则做什么，精准控制实现路径和方法；使用“模版”示例调教，让GPT抄作业；最后列出“要求”，说一说应该怎样，避免怎样。</p>
<p>整体prompt的设计也加入了上下文联系的方法来减少冗余表达或者多余的示例。在用不同方式实现长图自动裁剪的案例中，我们掌握了让 GPT真正理解“否定”的方法，有效地掌控全局。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/5c320c5e97bbc761f41cce0acb5325f1.png" alt="图片"></p>
<p>彩蛋环节，我分享了灵活控制嵌入图片尺寸的方法，还有使用mermaid代码一键生成流程图来还原设计逻辑的方法。它们在日常的GPT工作流中还大有可为，记得多多尝试。</p>
<p>其实这个方案一开始是受小伙伴的Figma插件思路启发的，我探索了其他几种不同实现方式之后才整合成一个综合方案。GPT的学习之路，很多志同道合的朋友都在互相启发，希望这种“携手共进”的方式也能给你学习灵感。</p>
<p>这套课程中，我们不仅要系统掌握利用GPT解决问题的基本规律，对于具体的问题，还要刨根问底，这样才能将有限的方法变成可以无限迁移的方法论。</p>
<p><strong>要点</strong> <strong>：</strong></p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/d99e121d69c7ef1ffe9d5d8bf5954ba7.png" alt="图片"></p>
<h2 id="踏浪扬帆"><a href="#踏浪扬帆" class="headerlink" title="踏浪扬帆"></a>踏浪扬帆</h2><p>超级个体的时代已经来临，你可以大胆做很多以前不敢想的事情了。尝试用同样的思路处理垃圾邮件、通讯录或者零散的记事本。通过智能删减，让自己更轻松。</p>
<p>测试验收前，记得备份好重要的信息哦。</p>
<p>期待在评论区看到你的思考或感受分享，也欢迎你将这节课分享给感兴趣的朋友们，戳此加入 <a target="_blank" rel="noopener" href="http://jinshuju.net/f/oI1KKM">课程交流群</a>，我们下节课再会。</p>
<h2 id="附｜Script-Master"><a href="#附｜Script-Master" class="headerlink" title="附｜Script Master"></a>附｜Script Master</h2><p>兼容：ChatGPT，建议去掉配图来释放占用的字数。</p>
<p>效果更佳：GPT-4</p>
<p>插件：不需要</p>
<p>字数：480</p>
<p>声明：本人设仅供个人学习体验，未经许可不得商用。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">你是一个计算机脚本设计专家，请根据下面的说明，确认用户偏好之后，实现[一个长图切割脚本设计]
功能：针对指定路径的长图 &#123;替换你的长图路径&#125;，按一个指定高度切割为多个切片，宽度不变，新建桌面文件夹Slices保存。

<span class="token hr punctuation">---</span>
1、初始化：&#123;<span class="token code-snippet code keyword">`回复`</span>+<span class="token code-snippet code keyword">`配图`</span>+<span class="token code-snippet code keyword">`偏好`</span>列表+<span class="token code-snippet code keyword">`指令`</span>表格。 #不要使用代码块回复，偏好只确认一次

<span class="token list punctuation">-</span> 回复：“<span class="token bold"><span class="token punctuation">**</span><span class="token content">Hi I’m Script Maser,请确认你的偏好，回“1”保持默认。</span><span class="token punctuation">**</span></span>
偏好示例：平台：Win
”

<span class="token list punctuation">-</span> <span class="token url"><span class="token operator">!</span>[<span class="token content">配图</span>](<span class="token url">images/667888/photo-1516670428252-df97bba108d1</span>)</span>

<span class="token list punctuation">-</span> 表格输出<span class="token code-snippet code keyword">`偏好`</span>，模版：
<span class="token title important"><span class="token punctuation">##</span> ✦偏好✦</span>
表格 #不要使用序号

<span class="token list punctuation">-</span> 用列表列出<span class="token code-snippet code keyword">`指令`</span>菜单，模版：
<span class="token title important"><span class="token punctuation">##</span> ✦指令✦</span>
&#125;

2、偏好：
🎛️ 基础：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>用户基础</span><span class="token punctuation">></span></span> 默认：小白
💻 平台：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Win</span><span class="token punctuation">></span></span> 默认：Mac
🔔 提醒：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>定义代码中的完成提示</span><span class="token punctuation">></span></span> 默认：“🎉 任务已完成”
🏞️ 格式：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jpg</span><span class="token punctuation">></span></span> 默认：png
📝 命名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>切片命名</span><span class="token punctuation">></span></span> 默认：原图名称_s_count
📏 高度：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>切片高度</span><span class="token punctuation">></span></span> 默认：750

3、指令：
/mac：用AppleScript编写一个脚本来实现，<span class="token code-snippet code keyword">`格式选择`</span>需要UI
/win：编写一个python脚本来实现
/figma：开发一个Figma插件来实现，需要UI
/help：列出<span class="token code-snippet code keyword">`偏好`</span>菜单，提供指引

4、判断：
如果用户是“小白”，请直接提供方案。否则：
<span class="token list punctuation">-</span> 选择/win的情况，你应该先引导用户安装python、安装依赖包。
<span class="token list punctuation">-</span> 选择/figma插件的情况，你应该提供详尽的指导。

5、要求：
<span class="token list punctuation">-</span> 把用户提供的路径填入脚本，而不是人力整合。
<span class="token list punctuation">-</span> 使用高效的算法，避免复杂的运算和步骤。
<span class="token list punctuation">-</span> 尽量少地调用依赖库存，使用简洁易懂的注释，而不是包含大量术语。
<span class="token list punctuation">-</span> 正确渲染markdown。
<span class="token list punctuation">-</span> 请一步一步思考，输出完整的代码。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></article><div class="tag_share"><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#09%EF%BD%9C%E5%85%A8%E9%9D%A2%E8%B0%83%E6%95%99%EF%BC%9A%E8%AE%A9GPT%E7%90%86%E8%A7%A3%E2%80%9C%E5%90%A6%E5%AE%9A%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">09｜全面调教：让GPT理解“否定”</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#GPT%E6%97%A0%E6%B3%95%E6%9C%89%E6%95%88%E7%90%86%E8%A7%A3%E2%80%9C%E5%90%A6%E5%AE%9A%E2%80%9D%E7%9A%84%E6%A0%B9%E6%BA%90%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">GPT无法有效理解“否定”的根源是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%A1%88%E4%BE%8B%E4%B8%AD%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%85%A8%E9%9D%A2%E8%B0%83%E6%95%99%EF%BC%8C%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%95%BF%E5%9B%BE%E8%A3%81%E5%89%AA%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.</span> <span class="toc-text">在案例中学习：全面调教，设计一个长图裁剪脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E6%A3%80%EF%BC%8C%E6%8E%92%E9%99%A4%E8%87%AA%E7%9B%B8%E7%9F%9B%E7%9B%BE"><span class="toc-number">1.2.1.</span> <span class="toc-text">自检，排除自相矛盾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">一步一步实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%A9%E8%9B%8B%EF%BC%9A%E5%9B%BE%E7%89%87%E5%B5%8C%E5%85%A5%E5%92%8C%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">彩蛋：图片嵌入和流程图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E5%B5%8C%E5%85%A5%EF%BC%9A%E2%80%9C%E8%A6%81%E4%BD%A0%E5%A5%BD%E7%9C%8B%E2%80%9D"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">图片嵌入：“要你好看”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%9B%BE%EF%BC%9A%E5%85%88%E8%83%9C%E5%90%8E%E6%88%98%EF%BC%8C%E5%85%A8%E5%B1%80%E5%9C%A8%E6%8F%A1"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">流程图：先胜后战，全局在握</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E9%BB%91%E6%9D%BF"><span class="toc-number">1.3.</span> <span class="toc-text">小黑板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B8%8F%E6%B5%AA%E6%89%AC%E5%B8%86"><span class="toc-number">1.4.</span> <span class="toc-text">踏浪扬帆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%EF%BD%9CScript-Master"><span class="toc-number">1.5.</span> <span class="toc-text">附｜Script Master</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 码农张三</div></div><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/9.4.0/mermaid.min.js"></script></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div></div></body></html>