<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>25｜视频/3D/数字人：探索AI绘画的N种可能 | geekbang</title><meta name="author" content="码农张三"><meta name="copyright" content="码农张三"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能你好，我是南柯。 在之前的课程中，我们已经探讨了AI绘画的各种常见技巧，包括文生图、图生图、定制化图像生成、ControlNet构图控制、图像编辑等。 其实这些图像相关的技能仅仅是AI绘画的基本能力。今天这一讲我会带你了解三个更高阶的AI绘画能力，分别是文生视频技术、通用3D生成技术和数字人技术。见识了这些更高级的技术，你对于AI">
<meta property="og:type" content="article">
<meta property="og:title" content="25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能">
<meta property="og:url" content="https://zhuansun.github.io/geekbang/posts/658621881.html">
<meta property="og:site_name" content="geekbang">
<meta property="og:description" content="25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能你好，我是南柯。 在之前的课程中，我们已经探讨了AI绘画的各种常见技巧，包括文生图、图生图、定制化图像生成、ControlNet构图控制、图像编辑等。 其实这些图像相关的技能仅仅是AI绘画的基本能力。今天这一讲我会带你了解三个更高阶的AI绘画能力，分别是文生视频技术、通用3D生成技术和数字人技术。见识了这些更高级的技术，你对于AI">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg">
<meta property="article:published_time" content="2024-02-29T12:01:07.000Z">
<meta property="article:modified_time" content="2024-03-21T11:04:50.362Z">
<meta property="article:author" content="码农张三">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zhuansun.github.io/geekbang/posts/658621881"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '25｜视频/3D/数字人：探索AI绘画的N种可能',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-21 11:04:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="geekbang" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/653470a0c458853aef5813f1.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">1345</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">geekbang</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">25｜视频/3D/数字人：探索AI绘画的N种可能</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-02-29T12:01:07.000Z" title="发表于 2024-02-29 12:01:07">2024-02-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AI%E7%BB%98%E7%94%BB%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E6%88%98/">AI绘画核心技术与实战</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="25｜视频-3D-数字人：探索AI绘画的N种可能"><a href="#25｜视频-3D-数字人：探索AI绘画的N种可能" class="headerlink" title="25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能"></a>25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能</h1><p>你好，我是南柯。</p>
<p>在之前的课程中，我们已经探讨了AI绘画的各种常见技巧，包括文生图、图生图、定制化图像生成、ControlNet构图控制、图像编辑等。</p>
<p>其实这些图像相关的技能仅仅是AI绘画的基本能力。今天这一讲我会带你了解三个更高阶的AI绘画能力，分别是文生视频技术、通用3D生成技术和数字人技术。见识了这些更高级的技术，你对于AI绘画的无限潜能一定会有更清晰的认识。在之后的求职择业中，你也可以选择一个感兴趣的切入点，持续地深入下去。</p>
<h2 id="视频类技能"><a href="#视频类技能" class="headerlink" title="视频类技能"></a>视频类技能</h2><p>对我们来说，无论是使用SD模型或者Midjourney，生成一张2D图像似乎并不费劲。很自然地我们会想：对于输入的prompt，如果生成一系列连续的2D图像以后，再将它们连在一起，能否得到精致的视频呢？这其实就是AI绘画的视频类技能。</p>
<h3 id="体验文生视频"><a href="#体验文生视频" class="headerlink" title="体验文生视频"></a>体验文生视频</h3><p>使用prompt来生成视频的技术，我们一般称之为文生视频（Text-to-Video）。事实上，这并不是一件容易的事情。文生视频需要满足两个约束条件。第一，生成的视频整体需要符合prompt指定的内容。第二，需要确保AI绘画模型生成的每一帧图像都连贯一致，这样最终生成的视频看起来才不会违和。</p>
<p>你可以点开 <a target="_blank" rel="noopener" href="https://colab.research.google.com/github/NightWalker888/ai_painting_journey/blob/main/lesson25/Text_to_Video_Demo.ipynb">Colab链接</a>，和我一起体验下文生视频的算法效果。首先，我们使用 <a target="_blank" rel="noopener" href="https://huggingface.co/cerspense/zeroscope_v2_576w">Hugging Face</a> 中能够实现文生视频的模型。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch
<span class="token keyword">from</span> diffusers <span class="token keyword">import</span> DiffusionPipeline<span class="token punctuation">,</span> DPMSolverMultistepScheduler
<span class="token keyword">from</span> diffusers<span class="token punctuation">.</span>utils <span class="token keyword">import</span> export_to_video

<span class="token comment"># 加载模型文件</span>
pipe <span class="token operator">=</span> DiffusionPipeline<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"cerspense/zeroscope_v2_576w"</span><span class="token punctuation">,</span> torch_dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span>float16<span class="token punctuation">)</span>
pipe<span class="token punctuation">.</span>scheduler <span class="token operator">=</span> DPMSolverMultistepScheduler<span class="token punctuation">.</span>from_config<span class="token punctuation">(</span>pipe<span class="token punctuation">.</span>scheduler<span class="token punctuation">.</span>config<span class="token punctuation">)</span>
pipe<span class="token punctuation">.</span>enable_model_cpu_offload<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>然后，我们写下几组prompt，测试文生视频的效果。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 使用prompt进行视频创作</span>
prompt <span class="token operator">=</span> <span class="token string">"Darth Vader is surfing on waves"</span>
video_frames <span class="token operator">=</span> pipe<span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> num_inference_steps<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">320</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">576</span><span class="token punctuation">,</span> num_frames<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>frames
video_path <span class="token operator">=</span> export_to_video<span class="token punctuation">(</span>video_frames<span class="token punctuation">,</span> output_video_path<span class="token operator">=</span><span class="token string">"video1.mp4"</span><span class="token punctuation">)</span>

prompt <span class="token operator">=</span> <span class="token string">"A dog wearing a superhero cape flying through the sky"</span>
video_frames <span class="token operator">=</span> pipe<span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> num_inference_steps<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">320</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">576</span><span class="token punctuation">,</span> num_frames<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>frames
video_path <span class="token operator">=</span> export_to_video<span class="token punctuation">(</span>video_frames<span class="token punctuation">,</span> output_video_path<span class="token operator">=</span><span class="token string">"video2.mp4"</span><span class="token punctuation">)</span>

prompt <span class="token operator">=</span> <span class="token string">"A spaceship landing on Mars"</span>
video_frames <span class="token operator">=</span> pipe<span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> num_inference_steps<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">320</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">576</span><span class="token punctuation">,</span> num_frames<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>frames
video_path <span class="token operator">=</span> export_to_video<span class="token punctuation">(</span>video_frames<span class="token punctuation">,</span> output_video_path<span class="token operator">=</span><span class="token string">"video3.mp4"</span><span class="token punctuation">)</span>

prompt <span class="token operator">=</span> <span class="token string">"A horse drinking water"</span>
video_frames <span class="token operator">=</span> pipe<span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> num_inference_steps<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">320</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">576</span><span class="token punctuation">,</span> num_frames<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>frames
video_path <span class="token operator">=</span> export_to_video<span class="token punctuation">(</span>video_frames<span class="token punctuation">,</span> output_video_path<span class="token operator">=</span><span class="token string">"video4.mp4"</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们可以将生成的mp4视频文件下载到本地查看生成效果。你需要注意，这些视频文件需要安装 <a target="_blank" rel="noopener" href="https://www.videolan.org/">vlc播放器</a> 才能正常播放。我们可以通过后面的Python代码将视频转为GIF格式，这样查看时更方便。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> moviepy<span class="token punctuation">.</span>editor <span class="token keyword">import</span> VideoFileClip

<span class="token keyword">def</span> <span class="token function">convert_mp4_to_gif</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> output_file<span class="token punctuation">,</span> start_time<span class="token punctuation">,</span> end_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    Convert mp4 video to gif.

    Parameters:
    input_file (str): The path of the input video file.
    output_file (str): The path of the output gif file.
    start_time (int): The start time (in seconds) for gif.
    end_time (int): The end time (in seconds) for gif.

    Returns:
    None
    """</span>
    clip <span class="token operator">=</span> VideoFileClip<span class="token punctuation">(</span>input_file<span class="token punctuation">)</span><span class="token punctuation">.</span>subclip<span class="token punctuation">(</span>start_time<span class="token punctuation">,</span> end_time<span class="token punctuation">)</span>
    clip<span class="token punctuation">.</span>write_gif<span class="token punctuation">(</span>output_file<span class="token punctuation">,</span> fps<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment"># 使用函数，指定原始文件、目标输出、原始视频中从哪一秒到哪一秒需要转换为GIF</span>
<span class="token comment"># 这里我们选择第0秒开始，第3秒截止。</span>
convert_mp4_to_gif<span class="token punctuation">(</span><span class="token string">"video1.mp4"</span><span class="token punctuation">,</span> <span class="token string">"output1.gif"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
convert_mp4_to_gif<span class="token punctuation">(</span><span class="token string">"video2.mp4"</span><span class="token punctuation">,</span> <span class="token string">"output2.gif"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>你可以点开图片查看我们使用prompt生成的视频效果。可以看到，这些视频不仅符合我们prompt所描述的内容，而且内容上是连贯一致的。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/a4dc6967fayyc30150d60ab9787173f7.gif"></p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/a0ceb7eaeda9e22a630ce75c394daffa.gif"></p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/f4226bdbc9371c261a578539ca6653fb.gif"></p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/d496f1611205eae51e277a3yy3ffbc44.gif"></p>
<h3 id="技术细节探究"><a href="#技术细节探究" class="headerlink" title="技术细节探究"></a>技术细节探究</h3><p>那么，文生视频技术究竟是如何实现的呢？和我们熟悉的文生图相比，它又有哪些不同？</p>
<p>2022年9月底Meta提出了 <a target="_blank" rel="noopener" href="https://ai.facebook.com/blog/generative-ai-text-to-video/">Make-A-Video</a> 技术，我们就以这个算法为例加以说明。如果说DALL-E 2是文生图领域的里程碑，Make-A-Video无疑是文生视频领域的里程碑。整个模型的训练过程可以分为后面两个阶段。</p>
<p>首先，需要使用我们第13讲中学过的DALL-E 2方案训练一个文生图模型，得到先验模型P、解码器模型D和两个超分模型$SR_{l}$和$SR_{h}$，这个过程的训练需要用到我们熟悉的图像文本对数据。这里推荐你回看 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/686873">第13讲</a>，复习DALL-E 2的训练过程。</p>
<p>之后，为了让文生图模型能同时生成多帧图像，需要将模型中的2D卷积层改造成3D时空卷积层，并在帧间引入注意力机制。</p>
<p>经过这样的改造，我们输入一个prompt，先验模型P就可以得到16个图像表征。在这个阶段，我们的先验模型P已经能够将文本表征转换为图像表征，因此只需要使用一些视频片段数据微调新增加的时空卷积参数和注意力权重，不再需要图文成对数据。</p>
<p>你可以点开后面的图像，进一步了解Make-A-Video实现文生视频的过程。首先输入一个prompt，先验模型P根据prompt生成16个图像表征。然后解码器模型对图像表征进行解码，得到16张64x64分辨率的图像。之后经过视频插帧模块、连续两个上采样模块$SR_{l}$和$SR_{h}$，最终得到一段高分辨率的视频。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/ec89b08435e10d0yy75ba2f8b1c9e2ed.png"></p>
<p>你可以点开图片，看看Make-A-Video生成的多帧图片效果。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/bf7858f0d1a868087da504b07f70d04f.jpg"></p>
<p>我们可以看到，每一帧图像都满足prompt指令的限制，并且前后帧之间有着良好的连续性。这里的连续性，你可以理解为将这些图像帧按照顺序连接成视频，“剧情”是连贯的。</p>
<p>本质上， <strong>文生视频技术是文生图技术的延伸。基础的文生图模型负责理解prompt文本指令，在此基础上，引入3D时空卷积层和一些视频片段，便可以将文生图模型升级为文生视频模型</strong>。</p>
<h3 id="更多应用延展"><a href="#更多应用延展" class="headerlink" title="更多应用延展"></a>更多应用延展</h3><p>如果说文生视频对应的图像任务中文生图的能力，那么有没有对应图生图能力的视频技术呢？答案是肯定的！视频风格化技术解决的正是这个问题。提到视频风格化技术，你可能听说过Runway公司提出的 <a target="_blank" rel="noopener" href="https://research.runwayml.com/gen1">Gen-1</a> 和 <a target="_blank" rel="noopener" href="https://research.runwayml.com/gen2">Gen-2</a> 模型。我们一起看看视频风格化算法的效果。</p>
<p> 视频来源：<a target="_blank" rel="noopener" href="https://research.runwayml.com/gen2">https://research.runwayml.com/gen2</a></p>
<p>视频来源：<a target="_blank" rel="noopener" href="https://anonymous-31415926.github.io/">https://anonymous-31415926.github.io/</a></p>
<p>除了上面的例子，在短视频平台你可能也看到过一些视频风格化的效果，比如后面这个例子。相比于图像风格化技术，视频风格化需要解决的核心问题是不同帧间的身份一致性问题，以及连续帧的闪动问题。</p>
<p>视频创作的能力为我们带来无限的可能性，各个公司都看到了视频创作的巨大潜力，加速了视频AIGC技术的发展。比如，2023年4月，NVIDIA推出了Align your Latents技术，可以产生4K高清视频，你可以查看后面的视频效果。</p>
<p>视频来源：<a target="_blank" rel="noopener" href="https://research.nvidia.com/labs/toronto-ai/VideoLDM/">https://research.nvidia.com/labs/toronto-ai/VideoLDM/</a></p>
<p>想象一下，Text-to-Video未来或许可以进化成为Text-to-Movie，那将是一件鼓舞人心的事情，每个人都有可能成为自己生活的导演。</p>
<h2 id="3D类技能"><a href="#3D类技能" class="headerlink" title="3D类技能"></a>3D类技能</h2><p>我们熟悉的prompt不仅可以用来生成2D图像和连续的视频，还也可以用来生成3D模型，完成3D内容创作。</p>
<h3 id="初识3D生成"><a href="#初识3D生成" class="headerlink" title="初识3D生成"></a>初识3D生成</h3><p>这就引出了我们接下来的话题——文生3D（Text-to-3D）。在深度学习技术爆发前，物体的3D建模主要靠人工完成，整个过程费时费力。随着生成对抗网络（GANs）和自编码器（AEs）等技术的发展，我们逐渐能够通过学习大量的训练数据生成新的3D模型。</p>
<p>2020年 <a target="_blank" rel="noopener" href="https://www.matthewtancik.com/nerf">NeRF技术</a> 的提出更是将3D生成带入了全新的阶段，使用一个物体的一些图片，便可以训练一个神经网络来恢复高质量的3D模型。你可以看后面的图片了解一下NeRF算法的效果。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/36527a726222fe7497c48674cb829fed.jpg"></p>
<p>我们这门课程的主角——扩散模型，非常擅长生成天马行空的创意图像。那么它能否用于指导3D模型的生成呢？答案是肯定的。</p>
<p>无论是Google在2022年9月推出的 <a target="_blank" rel="noopener" href="https://dreamfusion3d.github.io/">DreamFusion</a>，还是英伟达在2022年11月推出的 <a target="_blank" rel="noopener" href="https://research.nvidia.com/labs/dir/magic3d/">Magic3D</a>，抑或是字节在2023年8月提出的 <a target="_blank" rel="noopener" href="https://avatarverse3d.github.io/">AvatarVerse</a>，都可以通过prompt生成完整的3D模型。这些算法的生成效果是后面这样。</p>
<p>视频来源：<a target="_blank" rel="noopener" href="https://dreamfusion3d.github.io/">https://dreamfusion3d.github.io/</a></p>
<p>视频来源：<a target="_blank" rel="noopener" href="https://research.nvidia.com/labs/dir/magic3d/">https://research.nvidia.com/labs/dir/magic3d/</a></p>
<p>视频来源：<a target="_blank" rel="noopener" href="https://avatarverse3d.github.io/">https://avatarverse3d.github.io/</a></p>
<h3 id="技术细节探究-1"><a href="#技术细节探究-1" class="headerlink" title="技术细节探究"></a>技术细节探究</h3><p>简单的一行prompt是如何完成通用3D模型生成的呢？我们这就以DreamFusion算法为例，来揭密背后的技术。</p>
<p>我们刚刚说过，NeRF技术只需要一组图像，便可以重建物体的3D模型。 <strong>如果我们用AI绘画模型来生成这样的一组图像，再用NeRF来恢复背后的3D模型，不就实现了文生3D的过程么</strong>？这就是DreamFusion这个算法背后的原理。</p>
<p>后面的这张算法原理图，展示的就是这个过程，左半部分是NeRF结构，右半部分是我们熟悉的一个预先训练好的扩散模型。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/9a279ea57a6abaf25eb510e26726d8e3.png"></p>
<p>简单来说，NeRF生成的3D模型，经过渲染可以得到2D图像，而方案中的AI绘画模型能够根据prompt生成目标2D图像。这样我们就可以用AI绘画生成的图像和NeRF渲染后得到的图像计算损失函数，从而优化NeRF模型的参数。</p>
<p>但当前的3D生成算法有一个普遍的缺点，就是生成速度慢。比如我们使用DreamFusion算法，根据一句prompt完成3D生成，即使在英伟达高端显卡上也需要花费大约1个小时。如何降低文生3D算法的耗时，也是当下的研究热点之一。</p>
<h3 id="数字人技术"><a href="#数字人技术" class="headerlink" title="数字人技术"></a>数字人技术</h3><p>在3D物体生成方向，有一个特殊的领域一直备受追捧，那就是数字人（Avatar）技术。更具体而言，数字人技术可以分为两个大方向，分别是数字人创建和数字人驱动。我们今天的讨论主要聚焦于数字人创建技术。</p>
<p>在游戏行业，为用户制作数字人形象已是标配，许多3D游戏都实现了这项功能。然而，用户在细节调整中常常感到困扰，花费大量时间选择发型、眼睛、鼻子、嘴巴、眼镜等素材后，所创造的角色可能仍然与用户的形象存在较大差距。</p>
<p>那么能不能通过3D生成算法，输入一张照片，自动创建用户的数字人形象呢？这就是数字人创建技术要解决的核心问题。</p>
<p>在扩散模型技术爆发之前，行业内已经有了很多基于物理引擎的数字人创建方案，这些系统通常需要3D建模师手工设计数字人模型。2022年12月，微软亚洲研究院推出的3D生成扩散模型—— <a target="_blank" rel="noopener" href="https://3d-avatar-diffusion.microsoft.com/">RODIN</a>，不仅可以根据输入图片创建数字人形象，还率先实现了从prompt创建数字人的能力。你可以点开图像查看这个算法的效果。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/32c65602d9d3722bd6929936f7555328.png"></p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/dce4b5e4a82c21779561080de698ea54.gif"></p>
<p>图片来源：<a target="_blank" rel="noopener" href="https://3d-avatar-diffusion.microsoft.com/">https://3d-avatar-diffusion.microsoft.com/</a></p>
<p>那么，Rodin算法是如何实现这些功能的呢？你可以点开图片，边看原理图边听我讲解。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/a67bc0b424738248ab5dbf08e86f1356.png"></p>
<p>首先，Rodin算法团队引入了大量设计师设计的3D素材，构建了一个数字人物理引擎。这个引擎可以组合各种属性（发型、脸型、服饰等），生成3D数字人形象，进一步渲染出2D形象。同时，论文作者借助一些简单的遣词造句规则，将选择的属性写成prompt，比如“一个戴眼镜的老年男人”。</p>
<p>然后，使用2D图片、prompt作为算法输入，使用级联模型的形式引入两个扩散模型，最终得到一个名为tri-plane的3D表征。这样，我们便可以用渲染后的2D图像和上一步物理引擎渲染的2D图像设计损失函数，对Rodin算法的参数进行优化了。</p>
<p>通过这种方式训练出来的模型，无论我们输入一张照片，或者是输入一个prompt，都可以完成3D数字人创建的任务。但这个算法有两个显而易见的缺点。第一，算法生成的3D数字人风格单一，只能是训练数据中包含的风格。第二，算法生成的数字人形象无法被驱动，也就是不能做出表情和动作。</p>
<p>相信在不久的将来，会有技术人员提出可以指定任意风格、可以直接被驱动的数字人创建技术。让我们拭目以待！</p>
<h2 id="总结时刻"><a href="#总结时刻" class="headerlink" title="总结时刻"></a>总结时刻</h2><p>今天这一讲，我们学习了AI绘画能力的三项高阶技能：视频创作、3D生成和数字人技术。这一讲我们主要探讨了这三项技能中最有代表性的技术。</p>
<p>视频创作的代表性技术是Make-a-Video，我们一起探讨了它背后的算法原理。当前视频生成技术已经可以生成4K效果，并且在持续演进。某种意义上说，文生视频也许是AI绘画技术的下一个爆发点。</p>
<p>对于3D生成，我们探讨了经典解决方案DreamFusion，搞懂了这个算法如何将NeRF技术与AI绘画模型相结合，从而实现文生3D的神奇效果。之后我们讨论了数字人创建这个特殊的3D生成技术，课程里的例子是微软的Rodin算法，通过该技术可以实现用图片或者prompt去生成一个数字人形象。</p>
<p>无论是图像、视频、通用3D或者数字人技术，AI绘画技术都是在高速狂飙。相信很快，使用单图无需训练的创意相册技术、更高清连贯的长视频生成技术、直接生成可驱动的3D数字人等技术都会走进我们的视野。对于AI绘画这个话题而言，我们今天所见所学都还只是刚刚开始，未来仍旧值得我们期待。</p>
<p>非常鼓励你去读读今天课程中涉及的论文，加深对这些技术的理解。这一讲的知识我整理成了后面的思维导图，方便你课后复习。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202402/2aef027bf98f3fcf0e6a5d6b8b839e15.jpg"></p>
<h2 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h2><p>经过我们课程的学习，你能否总结下当前广义的AI绘画（2D、3D、视频等）有哪些核心问题待解决？这些问题的解决将带来怎样的产品机会？</p>
<p>欢迎你在留言区和我交流互动，也推荐你把这一讲分享给身边更多朋友。</p>
</article><div class="tag_share"><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#25%EF%BD%9C%E8%A7%86%E9%A2%91-3D-%E6%95%B0%E5%AD%97%E4%BA%BA%EF%BC%9A%E6%8E%A2%E7%B4%A2AI%E7%BB%98%E7%94%BB%E7%9A%84N%E7%A7%8D%E5%8F%AF%E8%83%BD"><span class="toc-number">1.</span> <span class="toc-text">25｜视频&#x2F;3D&#x2F;数字人：探索AI绘画的N种可能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E7%B1%BB%E6%8A%80%E8%83%BD"><span class="toc-number">1.1.</span> <span class="toc-text">视频类技能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%93%E9%AA%8C%E6%96%87%E7%94%9F%E8%A7%86%E9%A2%91"><span class="toc-number">1.1.1.</span> <span class="toc-text">体验文生视频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E7%BB%86%E8%8A%82%E6%8E%A2%E7%A9%B6"><span class="toc-number">1.1.2.</span> <span class="toc-text">技术细节探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E5%BA%94%E7%94%A8%E5%BB%B6%E5%B1%95"><span class="toc-number">1.1.3.</span> <span class="toc-text">更多应用延展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3D%E7%B1%BB%E6%8A%80%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text">3D类技能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E8%AF%863D%E7%94%9F%E6%88%90"><span class="toc-number">1.2.1.</span> <span class="toc-text">初识3D生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E7%BB%86%E8%8A%82%E6%8E%A2%E7%A9%B6-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">技术细节探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E4%BA%BA%E6%8A%80%E6%9C%AF"><span class="toc-number">1.2.3.</span> <span class="toc-text">数字人技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E6%97%B6%E5%88%BB"><span class="toc-number">1.3.</span> <span class="toc-text">总结时刻</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">1.4.</span> <span class="toc-text">思考题</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By 码农张三</div></div><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/9.4.0/mermaid.min.js"></script></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div></div></body></html>