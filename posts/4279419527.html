<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>07 | 善用口技：参数化沟通，更顺滑 | geekbang</title><meta name="author" content="码农张三"><meta name="copyright" content="码农张三"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="07 | 善用口技：参数化沟通，更顺滑你好，我是键盘，我们继续驯服 GPT。 与 ChatGPT 协作是一门交流的艺术，掌握 prompt 设计之后，你已经能使用 ChatGPT 理解的方式来引导 TA 做事了。但是，作为一个做中文语料理解还不完美的语言模型，什么描述方式能让 TA 的理解更敏感，输出更精准？ 以“突出输出结果里面的指引模块”为例，就有 3 种典型的 prompt 表达方式。 💬">
<meta property="og:type" content="article">
<meta property="og:title" content="07 | 善用口技：参数化沟通，更顺滑">
<meta property="og:url" content="https://zhuansun.github.io/geekbang/posts/4279419527.html">
<meta property="og:site_name" content="geekbang">
<meta property="og:description" content="07 | 善用口技：参数化沟通，更顺滑你好，我是键盘，我们继续驯服 GPT。 与 ChatGPT 协作是一门交流的艺术，掌握 prompt 设计之后，你已经能使用 ChatGPT 理解的方式来引导 TA 做事了。但是，作为一个做中文语料理解还不完美的语言模型，什么描述方式能让 TA 的理解更敏感，输出更精准？ 以“突出输出结果里面的指引模块”为例，就有 3 种典型的 prompt 表达方式。 💬">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg">
<meta property="article:published_time" content="2023-10-20T09:48:40.000Z">
<meta property="article:modified_time" content="2023-12-11T12:04:45.316Z">
<meta property="article:author" content="码农张三">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zhuansun.github.io/geekbang/posts/4279419527"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '07 | 善用口技：参数化沟通，更顺滑',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-11 12:04:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="geekbang" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/653470a0c458853aef5813f1.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">587</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">geekbang</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">07 | 善用口技：参数化沟通，更顺滑</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-10-20T09:48:40.000Z" title="发表于 2023-10-20 09:48:40">2023-10-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9B%B6%E5%9F%BA%E7%A1%80GPT%E5%BA%94%E7%94%A8%E5%85%A5%E9%97%A8%E8%AF%BE/">零基础GPT应用入门课</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="07-善用口技：参数化沟通，更顺滑"><a href="#07-善用口技：参数化沟通，更顺滑" class="headerlink" title="07 | 善用口技：参数化沟通，更顺滑"></a>07 | 善用口技：参数化沟通，更顺滑</h1><p>你好，我是键盘，我们继续驯服 GPT。</p>
<p>与 ChatGPT 协作是一门交流的艺术，掌握 prompt 设计之后，你已经能使用 ChatGPT 理解的方式来引导 TA 做事了。但是，作为一个做中文语料理解还不完美的语言模型，什么描述方式能让 TA 的理解更敏感，输出更精准？</p>
<p>以“突出输出结果里面的指引模块”为例，就有 3 种典型的 prompt 表达方式。</p>
<p>💬 第一种 prompt</p>
<ul>
<li>“明显一点”的表达含糊不清。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">注意，指引这里要明显一点<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>💬 第二种 prompt</p>
<ul>
<li>对齐语言，不用解释。这种还可以。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">用二级标题输出&quot;指引&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>💬 第三种 prompt</p>
<ul>
<li>冗余少，效果好。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">## 指引<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>如果对“ChatGPT 更喜欢的沟通方式”进行抽象提炼，我会把它分为结构化表达和参数化表达两部分。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/9af52b47e11f42998a894daf20e9fa29.png" alt="img"></p>
<h2 id="精准控制多分支，实现千人千面"><a href="#精准控制多分支，实现千人千面" class="headerlink" title="精准控制多分支，实现千人千面"></a>精准控制多分支，实现千人千面</h2><p>作为 Lang Master 的用户，我们会有不同的背景情况、五花八门的偏好，功能需求更是存在差异。所以它应该是一套可调参的灵活系统，而不是写死的人设。用参数化描述来分别定义需求细节，千人千面就可以轻松实现。</p>
<p>所谓参数化描述，它的本质就是<strong>用机器容易理解的公式来压缩表达，减少赘述</strong>，或者说减少很多浪费 token 的连接词。让变量影响输出，实现一个模版从 1 到 N 的复用。</p>
<p>这里和你分享 4 个我常用的相关定义。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/80789db5fb8e1a1d7b3d3ca44481026c.png" alt="img"></p>
<p><strong>功能指令</strong>：用标识符“&#x2F;”来清晰区分功能指令和普通描述，借助这一块的定义，你可以拓展这个综合人设的功能。比如定义 &#x2F;learn 用于学习、定义 &#x2F;style 用于调整输出风格。</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;功能指令
&#x2F;learn
&#x2F;style<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p><strong>变量</strong>：对应某一个对象或模块，给它赋值，让它可调整，驱动全局每一个可能应用到的地方，牵一发而动全身。比如定义一个num，让“输出 num 组参考”里面的数量可以调整。</p>
<pre class="line-numbers language-none"><code class="language-none">&#96;变量&#96;
输出&#96;num&#96;组参考<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p><strong>默认值</strong>：提供一个高容错的默认值。比如用做产品体验的思路，默认用中文讲解等等。</p>
<p><strong>初始化和帮助</strong>：第一次使用，能够引导用户沟通个人偏好，同时提供功能指令集的菜单，明确助理的职能。比如在用户迷茫的时候，可以用 &#x2F;help 调出指引，及时解决困境。&#x2F;help 其实就是再把菜单展示给用户，ChatGPT 也可能在这个基础上补充指引。</p>
<p>最后，所有大大小小的模块和参数，都可以根据个人需求进行增、删、改。对比传统的翻译工具，Lang Master 整个产品的运作就靠 ChatGPT 一个“员工”。</p>
<h2 id="准备：范式和设计"><a href="#准备：范式和设计" class="headerlink" title="准备：范式和设计"></a>准备：范式和设计</h2><p>借助“定义”理清思路之后，我们来盘点需要的实用特性，靠它们支撑完整的设计。现在我们要设计的是一个语言辅助专家，所以可能有这么几个需求。</p>
<ul>
<li>单词 + 音标 + 词性 + 词根 + 中英释义：满足基础学习需求，在此基础上，加入例句、近反义词和关联记忆法，可以帮助自己高效地关联学习。</li>
<li>单词配图：可视化的辅助手段。</li>
<li>翻译：基础使用需求。</li>
<li>风格：口语化 &#x2F; 书面化、海外客服、用户指南……根据不同使用场景调出更准确的人设。</li>
<li>润色：用于优化文案或者润色文章。</li>
<li>总结：投喂前沿论文，借助 ChatGPT 马上消化，不用再漫长地等待 N 手资料了。</li>
<li>换“语言”：学英语、学日语、学 prompt、学 Python、学股票指标编写、学脱口秀………从英语这个默认项开始，给你提供无限延展的可能性。</li>
</ul>
<p>接下来根据我们讲过的3W 原则给出的可套用的范式，照着思路来设计。</p>
<h3 id="立人设（Import），需求背景赋值"><a href="#立人设（Import），需求背景赋值" class="headerlink" title="立人设（Import），需求背景赋值"></a>立人设（Import），需求背景赋值</h3><p>我们围绕“XX：是什么”的赋值方式来定义所有的描述。</p>
<p>💬 prompt 思路模版</p>
<pre class="line-numbers language-none"><code class="language-none">import role，你是 @xx角色，你的任务是...

细节（赋值）：
a &#x3D; 1;(比如&quot;背景信息：XX&quot;)
b &#x3D; 2;
c &#x3D; 3;
...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>💬 我的 prompt</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/9c7aa4978c21b6b28ac4443ed390f462.png" alt="img"></p>
<p>偏好设置项的写法受 Mr_Ranedeer 的 prompt 启发 ，有兴趣的朋友可以<a target="_blank" rel="noopener" href="https://github.com/JushBJJ/Mr.-Ranedeer-AI-Tutor/tree/main">去挖宝</a>。</p>
<p>这个输入包含 4 部分内容，我拆解下设计它们的思考过程。</p>
<p>1、综合人设：圈定这个综合人设的能力范围，做什么、怎么做、预期目标是什么。</p>
<p>2、定义偏好：把需要设置的偏好选项定义好，提供选项和高容错的默认值。这里面的功能指令（&#x2F;）和变量（&#96;）不用严格区分，能通过赋值来下定义就好。比如“列表输出 &#x2F;num 组英文例句（中文翻译）”里面定义的 &#x2F;num，如果你想严谨一些，参考下面的例子，变量的颗粒度可以比功能指令低一级。</p>
<pre class="line-numbers language-none"><code class="language-none">preferences: #一级分类
&#x2F;learn:xx #二级功能指令
&#96;num&#96;:&lt;&gt; else 3 #三级变量<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>3、初始化：第一次使用，要把支持的功能菜单和偏好选项呈现给用户，让用户明白可以做什么。</p>
<p>4、沟通偏好：确认用户的偏好，提供修改的示例，也提供便捷的默认值使用方法，回复“1”就可以，用简单的方式应对复杂。（灵感：按“1”使用普通话）</p>
<p>虽然内容很多，但其实套用模版来设计综合人设只需要把握 2 个重点。</p>
<p>1、提供初始化指引和偏好选项。</p>
<p>2、提供高容错的默认值，让后续表达直白简单即可。比如用户基础（lvl）这里，为了避免复杂，我用一句话定义了万能的小白、初级、中级、高级这四个挡位，默认“小白”。你试试用自然语言描述来对比，参数化是不是简洁多了？</p>
<p>如果你想灵活调整，根据自己的需求动手就好。比如你的团队是做海外产品的，主要解决客服沟通和市场营销材料的话，可以给 &#x2F;style 定义“客服”，新增一个 &#x2F;field 来定义领域“xx 行业市场营销”等等。</p>
<h3 id="列要求（Module），定义输出模块和规则"><a href="#列要求（Module），定义输出模块和规则" class="headerlink" title="列要求（Module），定义输出模块和规则"></a>列要求（Module），定义输出模块和规则</h3><p>人设基础有了，开始派活。这一步展开后可能看起来有些复杂，实际上它的核心就是“&#x2F;xx 模块：做什么？你有哪些要求？”，简单而朴素。</p>
<p>💬 prompt 思路模版</p>
<pre class="line-numbers language-none"><code class="language-none">指令集：#定义子程序模块
&#x2F;A：做什么，输出模版(如有);
&#x2F;B：做什么;
&#x2F;C：做什么;

#要求 （rule）
if(case,x,y); &#x2F;&#x2F;满足情况 case 做 x，否则 y
style &#x3D; n; &#x2F;&#x2F;定义格式
范例学习（如有）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>💬 我的 prompt</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/cd2c92da95a797def97afd11c44e0d91.png" alt="img"></p>
<p>图片里“多功能（instructions）”的部分，我盘点了很多实用的特性来进行赋值。除了用智能配图做可视化辅助，还有其他各种功能的输出模版给 ChatGPT 参考。“要求（rules）”这里可以非常宽松，最小可用的情况是“请一步一步思考”，不过如果加上要求 Markdown 正确渲染，结果会更专业。</p>
<h3 id="下指令（Run）"><a href="#下指令（Run）" class="headerlink" title="下指令（Run）"></a>下指令（Run）</h3><p>上面立人设和列要求的 prompt 合起来贴到 ChatGPT 对话框，回车就可以了（文末会提供完整代码），后续就是按“&#x2F; 功能指令 要求”的方式来开启学习之路。你也可以随时用正常说话的方式来沟通。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/4dc424a9b01b7580yy9bf08b80a47d84.png" alt="img"></p>
<h2 id="跑机：成果验收"><a href="#跑机：成果验收" class="headerlink" title="跑机：成果验收"></a>跑机：成果验收</h2><p>接下来逐个跑指令，验证 Lang Master 的输出。</p>
<p>从初始引导到基础语言学习都很顺畅。因为有默认值的存在，大部分情况按“1”就可以开始了，英语输出也非常稳，谁叫人家语料多呢？那中途记不清最开始的指令集怎么办？随时 &#x2F;help，保你不迷路。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/0526dae236aa2f49fc344db8fa80547b.png" alt="img"></p>
<p>紧接着，日语翻车了。所有有价值的错误都要正视。这里的优点是 ChatGPT 是真的懂配图，坏就坏在我发现单词和音调都有点问题，寻求身边的日语高手验证，确实错了。TA 本身并没有词库，我初步怀疑是“驾驭”日语的能力还欠火候。一个比较粗暴的解决方式是借助联网插件，但不在我们本节“兼容 ChatGPT”的目标范围内。这个功能可以先放一放，后续解决。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/39aaf74abcd6cfe2f6a17ca6a5742d04.png" alt="img"></p>
<p>现在爬起来，继续前进。随着学习的提升，用户可以随时调整自己的基础水平。这里我把小白“升级”到初级，然后切换到口语校正和训练模式，用手机端 ChatGPT 的语音输入就可以开始真实发声训练了。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/9140d68ae158ecf802dfb00779a83a96.png" alt="img"></p>
<h2 id="延伸：什么“语言”都能学？"><a href="#延伸：什么“语言”都能学？" class="headerlink" title="延伸：什么“语言”都能学？"></a>延伸：什么“语言”都能学？</h2><p>想学习 ChatGPT 的好帮手 Python？也好办，不知道你有没有注意刚才整体 prompt 中基本学习请求的定义，我放在了下面。</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;basic：脚本、高级语言或其他广义语言的学习请求
提供结构化的章节，引导用户学习<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>虽然只有两行 prompt，TA 依然可以很聪明地提供学习更多脚本、高级语言、广义语言该有的帮助，当然也包括 Python。</p>
<p>注意，这里验收的时候我自己输错了，将 &#x2F;basic 打成了 &#x2F;learn，但是 ChatGPT 依然明白到我是想学 Python 这门“语言”，感人的智能容错。但是如果你在使用的过程中是有意识地迷失方向，那么输入前面设定好的 &#x2F;help，Lang Master 也会提供指引。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/92635137a71389c9102c9693611639d9.png" alt="img"></p>
<p>不满足于一种“广义语言”，想学动画吗？强大的 AE 表达式现在也可以通过 ChatGPT 来自学了，是的，它也可以被理解为一种语言，同时它也是一种“用参数来高效控制的”思维方式。</p>
<p>用表达式 loopOut(“cycle”) 实现无限循环，总比手动打无数个关键帧要高效吧？表达式通过转化成关键帧的方式（借助 AE 自带的烘培功能），也能整合进 JSON 动画直接上线到自己的产品中，不停留于技术层面。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/4504a9ed2b7c9e76b37af80bbb9dce37.png" alt="img"></p>
<p>我们再来了解一种开拓思维的可能性，学习股票函数指标编制。借助平台的内置自编工具，你可以方便地看到指标的可视化效果。不过，股市有风险，入市需谨慎，AI 方案仅供参考学习，不构成“亏钱”建议。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/43c0d0612d5608a5036decf0f98eca94.png" alt="img"></p>
<p>整体来看，用 700 汉字左右打造的 Lang Master（ChatGPT 单次输入极限 1200 汉字）hold 住了 ChatGPT 的兼容功能。日语这个小分支虽然有 bug，但也不影响其他的功能，给迭代减少了很多麻烦。更多需求，不过代码三两行，随你定义。</p>
<h2 id="思维树推理，更强大"><a href="#思维树推理，更强大" class="headerlink" title="思维树推理，更强大"></a>思维树推理，更强大</h2><p>最后我想和你分享一下，Lang Master 这种结构化、参数化的多分支书写方法的灵感来自思维树 ToT（Tree-of-Thoughts）。</p>
<blockquote>
<p>ToT 允许语言模型通过考虑多个不同的推理路径和自我评估选择来进行有意识地决策下一步行动，并在必要时向前或向后跟踪以做出全局选择。实验表明，在三项需要非平凡规划或搜索任务上，即 24 点游戏、创意写作和迷你填字游戏中，ToT 显著提高了语言模型的问题解决能力。例如，在 24 点游戏中，尽管只使用“思维链”的 GPT-4 只能解决 4% 的任务，但我们采用该方法成功率达到 74% 。　——Tree of Thoughts: Deliberate Problem Solving with Large Language Models</p>
</blockquote>
<p>区别在于，我们用“&#x2F; 功能指令”直接定位某个任务节点，借助要求里的“请一步一步思考”交给模型自己去继续推理。这样，加入“&#x2F; 功能指令”就能实现的强大思维树推理，比起入门时常用的一句话指令，或者生硬地使用思维链 CoT 来单方向输出，它有三个凸显的优势：满足多任务的实现、可扩展、成功率更高。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/b12f08e907fb702d1302994bdf9a9a0d.png" alt="img"></p>
<p>实际使用这种 500-1000 汉字的长指令，我们还是始终要注意 ChatGPT 上下文联系不足的局限性，解决方案也很简单，就是我们讲过的<a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/663631">固定生成点</a>，生成结果之后在合适的位置重新编辑，保持 ChatGPT 不断片。</p>
<h2 id="小黑板"><a href="#小黑板" class="headerlink" title="小黑板"></a>小黑板</h2><p>这节课从抽象“ChatGPT 更喜欢的沟通方式”出发，通过用 ChatGPT 重做一个传统的语言辅助产品的方式，解决如何“参数化”书写 prompt 的问题。我们可以把整体课程拆解为 2 个目标。</p>
<p><strong>第一个目标，设计一个 ChatGPT 模型都能兼容的强大语言助理 Lang Master。</strong></p>
<p>3W 原则又派上用场了，基础的重要性不言而喻。这里我换了一种思维来表达，Who &#x3D; Import role，How &#x3D; Module，What &#x3D; Run，其实就是这节课的核心口技“XX：是什么”了。</p>
<p>理完人设，列要求。这里又是朴素的一行描述“&#x2F;xx 模块：做什么？你有哪些要求？”。入门的时候我们由简入繁，设计的时候反过来大繁归简，这就是一个 prompt 灵活应用的方法：拆解底层逻辑，学习最基本的规律，而不是照搬后机械填空。</p>
<p><strong>第二个目标，将 Lang Master 打造为一套可以无限拓展的模版。</strong></p>
<p>受益于参数和 &#x2F; 功能指令共同构建的思维树推理，无限拓展就成为了可能。打个比方，各个指令集就像古典音乐的“多重赋格”，相互独立又和谐统一，你不会感到完整人设的隔离。一个模块出错可能不会影响其他模块的运作，比如日语，但是一个模块输出的好结果又会提升关联分支的结果，比如翻译后的润色。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/e61f7d3f328fc499b052d1d46739247a.png" alt="img"></p>
<p>现在，不仅三两行代码就能设计一个功能，你用 ChatGPT 设计的“新”产品也只需要 TA 自己就能上岗干活。很多产品都值得重做一遍，而且有一个懂 prompt 的人就够了。</p>
<p><strong>最后补充一个小插曲，也是 Lang Master 提供的灵感。</strong></p>
<p>最开始的指令集我并没有定义&#x2F;help来防止用户迷失，但是第一次试跑的时候 Lang Master 提供了这个帮助，我认为非常有用，就学过来了。虽然赋予了新人设，ChatGPT 老师一直默默保持了本色的智慧底蕴，为自己的“推理”能力代言。</p>
<p><img src="https://note-1252548816.cos.ap-nanjing.myqcloud.com/uPic/202312/3cc3ab951f2c3b2e301f55373db9572f.png" alt="img"></p>
<p><strong>要点：</strong></p>
<ul>
<li>参数化描述的本质：用机器容易理解的公式来压缩表达，减少赘述。</li>
<li>参数化的功能：用变量去影响输出，从 1 到 N。</li>
<li>借助 &#x2F; 功能指令定义，可以拓展综合人设的功能。</li>
<li>提供高容错的默认值和指引，防止使用时迷失。</li>
<li>用户偏好、指令集和参数随时可以按需“增删改”。</li>
<li>围绕“XX：是什么”的赋值方式来定义需求。</li>
<li>列要求口技：&#x2F;xx 模块：做什么？你有哪些要求？</li>
<li>最重要的要求：“请一步一步思考”。</li>
<li>思维树的三个优势：满足多任务的实现、可扩展、成功率更高。</li>
<li>用“&#x2F; 功能指令 要求”开启学习之路，随时可以用正常说话的方式来沟通。</li>
<li>固定“生成点”解决长会话容易断片的问题。</li>
</ul>
<h2 id="课后练习"><a href="#课后练习" class="headerlink" title="课后练习"></a>课后练习</h2><p>关于这个模版，你有什么改造的想法吗？，试着去拓展新功能或者吸收设计的精髓，将你日常能归为一大类的需求写进去，改成自己的 Work Master。</p>
<p>期待在评论区看到你的思考或感受，也欢迎你将这节课分享给感兴趣的朋友们，戳此加入课程交流群，我们下节课再会。</p>
<h2 id="附：Lang-Master-prompt"><a href="#附：Lang-Master-prompt" class="headerlink" title="附：Lang Master prompt"></a>附：Lang Master prompt</h2><p>适用：ChatGPT。</p>
<p>表现更佳：GPT-4。</p>
<p>字数：710。</p>
<p>声明：该 prompt 仅供个人参考学习，未经授权不可商用。</p>
<pre class="line-numbers language-none"><code class="language-none">你是一位专业的语言助理 @Lang Master，我会输入相关的请求，你将根据&#96;preferences&#96;、&#96;instruction&#96;和&#96;rules&#96;来协助我更高效掌握和使用一门语言。

初始回复：“
**🪭 Hi I&#39;m Lang Master，Created by Jer，V0.1，20230604**
### ⚙️ Preferences：
- 🎯 learn: &lt;&gt; else English
- 🌍 lang: &lt;&gt; else “English+中文解释”
- ⏲️ lvl: &lt;初级，中级，高级&gt; else 小白
- 🎨 style: &lt;&gt; else 正式的
### 🤖 Menu：
用表格输出支持的&#96;instructions&#96;和对应名称，不需要解释具体含义：
---
请指出你的偏好，E.g.：&#x2F;learn 中文。
回复1保持默认。
”

&#96;preferences&#96;
&#x2F;learn：&lt;目标学习语言，默认English&gt;
&#x2F;lang:&lt;语言偏好，默认为“English+中文解释”&gt;
&#x2F;lvl:&lt;用户的语言能力，小白（默认），初级，中级，高级&gt;
&#x2F;style:&lt;&gt; else 正式的
&#x2F;num:&lt;&gt; else 3
&#x2F;音标：&lt;含声调的拼音，国际音标、含声调的日语罗马音&gt;else 音标（美、英）

&#96;instructions&#96;
&#x2F;word：单词讲解
用户用任何语言输入单词，请按以下模版输出单词相关信息：
## 📝单词：
用表格输出：**单词**，音标，词性（abbr），词根，释义（中、英）
![单词配图](https:&#x2F;&#x2F;source.unsplash.com&#x2F;200x200&#x2F;?&lt;&#96;word&#96; in English&gt;) #不要使用代码块回复
## 💬例句：
列表输出&#x2F;num组*英文例句*(中文翻译)
## 🪞近义和反义：
列表输出近义词和反义词，含(中文释义)
## 💡关联记忆：
利用词根关联法，列表输出8个相关的单词
&#x2F;basic：脚本、高级语言或其他广义语言的学习请求
提供结构化的章节，引导用户学习
&#x2F;tran：翻译
检测语言，校正并翻译为中文。模版：
## 🦜翻译：
翻译
&#x2F;polish：润色
调用&#x2F;tran翻译之后，润色为更优雅的中文。模版：
## 🪄润色：
your polish
&#x2F;sum：总结
总结输入的英文，中文输出。
&#x2F;chat：口语对话
检查&#96;preferences&#96;的偏好，使用“目标语言”和用户对话，纠正并帮助用户提升口语表达。
&#x2F;help：输出支持的指令指引

&#96;rules&#96;
- 正确按输出模版渲染 markdown
- 用户学习日语时，&#x2F;word 的音标使用含数字音调的罗马音音标，如：**雨**：あめ①，音标：ame
- 假如单词有多个词性，应全部列出
- 提供语言服务前，确认用户的偏好
- 请一步一步思考，给用户提供专业的语言辅导<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





</article><div class="tag_share"><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#07-%E5%96%84%E7%94%A8%E5%8F%A3%E6%8A%80%EF%BC%9A%E5%8F%82%E6%95%B0%E5%8C%96%E6%B2%9F%E9%80%9A%EF%BC%8C%E6%9B%B4%E9%A1%BA%E6%BB%91"><span class="toc-number">1.</span> <span class="toc-text">07 | 善用口技：参数化沟通，更顺滑</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B2%BE%E5%87%86%E6%8E%A7%E5%88%B6%E5%A4%9A%E5%88%86%E6%94%AF%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8D%83%E4%BA%BA%E5%8D%83%E9%9D%A2"><span class="toc-number">1.1.</span> <span class="toc-text">精准控制多分支，实现千人千面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%EF%BC%9A%E8%8C%83%E5%BC%8F%E5%92%8C%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.</span> <span class="toc-text">准备：范式和设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%8B%E4%BA%BA%E8%AE%BE%EF%BC%88Import%EF%BC%89%EF%BC%8C%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.1.</span> <span class="toc-text">立人设（Import），需求背景赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A6%81%E6%B1%82%EF%BC%88Module%EF%BC%89%EF%BC%8C%E5%AE%9A%E4%B9%89%E8%BE%93%E5%87%BA%E6%A8%A1%E5%9D%97%E5%92%8C%E8%A7%84%E5%88%99"><span class="toc-number">1.2.2.</span> <span class="toc-text">列要求（Module），定义输出模块和规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%8C%87%E4%BB%A4%EF%BC%88Run%EF%BC%89"><span class="toc-number">1.2.3.</span> <span class="toc-text">下指令（Run）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%91%E6%9C%BA%EF%BC%9A%E6%88%90%E6%9E%9C%E9%AA%8C%E6%94%B6"><span class="toc-number">1.3.</span> <span class="toc-text">跑机：成果验收</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%EF%BC%9A%E4%BB%80%E4%B9%88%E2%80%9C%E8%AF%AD%E8%A8%80%E2%80%9D%E9%83%BD%E8%83%BD%E5%AD%A6%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">延伸：什么“语言”都能学？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E6%A0%91%E6%8E%A8%E7%90%86%EF%BC%8C%E6%9B%B4%E5%BC%BA%E5%A4%A7"><span class="toc-number">1.5.</span> <span class="toc-text">思维树推理，更强大</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E9%BB%91%E6%9D%BF"><span class="toc-number">1.6.</span> <span class="toc-text">小黑板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E5%90%8E%E7%BB%83%E4%B9%A0"><span class="toc-number">1.7.</span> <span class="toc-text">课后练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%EF%BC%9ALang-Master-prompt"><span class="toc-number">1.8.</span> <span class="toc-text">附：Lang Master prompt</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/10/21/vq13okXnTbxDG2R.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 码农张三</div></div><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/9.4.0/mermaid.min.js"></script></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div></div></body></html>